---
# Front matter
lang: ru-RU
title: "Лабораторная работа №8"
subtitle: "Дисциплина: Операционные системы"
author: "Королев Федор Константинович"

# Formatting
toc-title: "Содержание"
toc: true # Table of contents
toc_depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4paper
documentclass: scrreprt
polyglossia-lang: russian
polyglossia-otherlangs: english
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase
indent: true
pdf-engine: lualatex
header-includes:
  - \linepenalty=10 # the penalty added to the badness of each line within a paragraph (no associated penalty node) Increasing the value makes tex try to have fewer lines in the paragraph.
  - \interlinepenalty=0 # value of the penalty (node) added after each line of a paragraph.
  - \hyphenpenalty=50 # the penalty for line breaking at an automatically inserted hyphen
  - \exhyphenpenalty=50 # the penalty for line breaking at an explicit hyphen
  - \binoppenalty=700 # the penalty for breaking a line at a binary operator
  - \relpenalty=500 # the penalty for breaking a line at a relation
  - \clubpenalty=150 # extra penalty for breaking after first line of a paragraph
  - \widowpenalty=150 # extra penalty for breaking before last line of a paragraph
  - \displaywidowpenalty=50 # extra penalty for breaking before last line before a display math
  - \brokenpenalty=100 # extra penalty for page breaking after a hyphenated line
  - \predisplaypenalty=10000 # penalty for breaking before a display
  - \postdisplaypenalty=0 # penalty for breaking after a display
  - \floatingpenalty = 20000 # penalty for splitting an insertion (can only be split footnote in standard LaTeX)
  - \raggedbottom # or \flushbottom
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Познакомиться с операционной системой Linux. Получить практические навыки работы с редактором vi, установленным по умолчанию практически во всех дистрибутивах.

# Ход работы

## Создание нового файла с использованием vi

1. Создадим каталог с именем ~/work/os/lab06(Рис. 1):

![Рис. 1 создание каталога](screenshots/1.png)

2. Перейдем в созданный каталог(Рис. 2):

![Рис. 2 переход в созданный каталог](screenshots/2.png)

3. С помощью команды

```bash
vi hello.sh
```

Вызовим vi и создадим новый файл hello.sh

![Рис. 3 вызов vi](screenshots/3.png)

4. Нажмем клавишу i и введем следующий текст(Рис. 4):

```vi
#!/bin/bash
HELL=Hello
function hello {
    LOCAL HELLO=World
    echo $HELLO
}
echo $HELLO
hello
```

![Рис. 4 ввод текста](screenshots/4.png)

5-7. Нажмем клавишу Esc для перехода в командный режим вследствии чего завершим ввод текста. Нажмем : сочетанием Shift-; для перехода в режим последней строки. Нажмем w(записать) и q(выйти), а затем нажмем Enter для сохранения изменений и завершения работы(Рис. 5):

![Рис. 5 завершение редактирования](screenshots/5.png)

8. сделаем файл исполняемым с помощью команды(Рис. 6):

```bash
chmod +x hello.sh
```

![Рис. 6 изменение прав файла](screenshots/6.png)

## Редактирование существующего файла

1. Вызовем vi с помощью команды:

```bash
vi ~/work/os/lab06/hello.sh
```

2. Установим курсор(с помощью стрелок) в конец слова HELL второй строки(Рис. 7):

![Рис. 7 установка курсора](screenshots/7.png)

3. Перейдем в режим вставки(i) и допишем О в конец слова(Рис. 8). Клавишей Esc вернемся в командный режим.

![Рис. 8 редактирование строки](screenshots/8.png)

4. Установим курсор на четвертую строку и сотрем слово LOCAL(Рис. 9):

![Рис. 9 редактирование строки](screenshots/9.png)

5. Перейдем в режим вставки(i) и наберем текст: local(Рис. 10). Веренемся в командный режим с помощью Esc.

![Рис. 10 редактирование строки](screenshots/10.png)

6-7. Установим курсор на последней строке файла и вставим после неё строку, содержащую текст echo $HELLO(Рис. 11). После, перейдем в командный режим клавишей Esc.

![Рис. 11 добавление строки](screenshots/11.png)

8. Удалил последнюю строку используя клавишу d(Рис. 12):

![Рис. 12 удаление строки](screenshots/12.png)

9. Отменим последнее изменение с помощью команды u, предварительно перейдя в командную строку(:)(Рис. 13):

![Рис. 13 отмена изменений](screenshots/13.png)

10. Перейдем в режим последней строки(:) и запишем все произведенные изменения и выйдем из vi(wq)(Рис. 14):

![Рис. 14 записывание всех изменений](screenshots/14.png)

# Контрольные вопросы

1). Редактор vi имеет три режима работы:
	командный режим − предназначен для ввода команд редактирования и навигации по редактируемому файлу;
	режим вставки − предназначен для ввода содержания редактируемого файла;
	режим последней (или командной) строки − используется для записи изменений в файл и выхода из редактора.
2). Чтобы выйти из редактора, не сохраняя произведённые изменения, нужно в режиме командной строки нажать клавиши «:» «q» «!»
3). Команды позиционирования:
	«0»(ноль) − переход в начало строки;
	«$» − переход в конец строки;
	«G» − переход в конец файла;
	n«G» − переход на строку с номером n.
4). При использовании прописных W и B под разделителями понимаются только пробел, табуляция и возврат каретки. При использовании строчных w и b под разделителями понимаются также любые знаки пунктуации.
5). Чтобы из любого места редактируемого файла перейти в начало (конец) файла, нужно в режиме командной строки нажать клавиши «1» «G» («G»).
6). Команды редактирования:
	Вставка текста
	«а» − вставить текст после курсора;
	«А» − вставить текст в конец строки;
	«i» − вставить текст перед курсором;
	n «i» − вставить текст n раз;
	«I» − вставить текст в начало строки.
	Вставка строки
	«о» − вставить строку под курсором;
	«О» − вставить строку над курсором.
	Удаление текста
	«x» − удалить один символ в буфер;
	«d» «w» − удалить одно слово в буфер;
	«d» «$» − удалить в буфер текст от курсора до конца строки;
	«d» «0» − удалить в буфер текст от начала строки до позиции курсора;
	«d» «d» − удалить в буфер одну строку;
	n «d» «d» − удалить в буфер n строк.
	Отмена и повтор произведённых изменений
	«u» − отменить последнее изменение;
	«.» − повторить последнее изменение.
	Копирование текста в буфер
	«Y» − скопировать строку в буфер;
	n «Y» − скопировать n строк в буфер;
	«y» «w» − скопировать слово в буфер.
	Вставка текста из буфера
	«p» − вставить текст из буфера после курсора;
	«P» − вставить текст из буфера перед курсором.
	Замена текста
	«c» «w» − заменить слово;
	n «c» «w» − заменить nслов;
	«c» «$» − заменить текст от курсора до конца строки;
	«r» − заменить слово;
	«R» − заменить текст.
	Поиск текста
	«/» текст − произвести поиск вперёд по тексту указанной строки символов текст;
	«?» текст − произвести поиск назад по тексту указанной строки символов текст.
	Копирование и перемещение текста
	«:» n,m «d» – удалить строки с n по m;
	«:» i,j «m» k – переместить строки с i по j, начиная со строки k;
	«:» i,j «t» k – копировать строки с i по j в строку k;
	«:» i,j «w» имя-файла – записать строки с i по j в файл с именем имя-файла.
7). Чтобы заполнить строку символами ,необходимодляначалаперейтинаэтустроку,нажавклавишиn«G»,гдеn–номерстроки,далеенажать«0»дляпереходавначалостроки.Теперьнеобходимонажать«c»«», чтобы заменить текст от курсора до конца строки, и ввести символы $.
8). Чтобы отменить по одному предыдущему действию последовательно, необходимо нажать «u». Чтобы отменить все изменения, произведённые со времени последней записи, нужно нажать «:» «e» «!».
9). Команды редактирования в режиме командной строки
	Копирование и перемещение текста
	«:»n,m «d» − удалить строки с n по m;
	«:»i,j «m» k − переместить строки с i по j, начиная со строки k;
	«:»i,j «t» k − копировать строки с i по j в строку k;
	«:»i,j «w» имя-файла − записать строки с i по j в файл с именем имя-файла.
	Запись в файл и выход из редактора
	«:» «w» − записать изменённый текст в файл, не выходя из vi;
	«:» «w» имя-файла − записать изменённый текст в новый файл с именем имя-файла;
	«:» «w» «!» имя-файла − записать изменённый текст в файл с именем имя-файла;
	«:» «w» «q» − записать изменения в файл и выйти из vi;
	«:» «q» − выйти из редактора vi;
	«:» «q» «!» − выйти из редактора без записи;
	«:» «e» «!» − вернуться в командный режим, отменив все изменения, произведённые со времени последней записи.
	Опции
Опции редактора vi позволяют настроить рабочую среду. Для задания опций используется команда set (в режиме последней строки):
	«:»set all − вывести полный список опций;
	«:»set nu − вывести номера строк;
	«:»set list − вывести невидимые символы;
	«:»set ic − не учитывать при поиске, является ли символ прописным или строчным.
Если вы хотите отказаться от использования опции, то в команде set перед именем опции надо поставить no.
10). Чтобы определить, не перемещая курсора, позицию, в которой заканчивается строка, нужно в командном режиме находясь на нужной строке нажать «$»и посмотреть на число после запятой в правом нижнем углу экрана(Рис. 15).
 
![Рис. 15 иллюстрация к вопросу](screenshots/15.png)

11). Опции редактора vi позволяют настроить рабочую среду. Для задания опций используется команда set (в режиме командной строки). Если вы хотите отказаться от использования опции, то в команде set перед именем опции надо поставить no. Чтобы просмотреть опции редактора vi, необходимо нажать «:» set all (См. рисунок 20 ). Нажав «:» help “название_опции”, можно узнать назначение конкретной опции(Рис. 16).
 
![Рис. 16 иллюстрация к вопросу](screenshots/16.png)

12). В режиме командной строки внизу редактора присутствует «:», в режиме ввода – «–ВСТАВКА –», в командном режиме внизу ничего нет.
13). Граф взаимосвязи режимов работы редактора vi(Рис. 17).
 
![Рис. 17 иллюстрация к вопросу](screenshots/17.png)

# Вывод

В ходе данной лабораторной работы я освоил базовые навыки работы в редакторе vi.




























